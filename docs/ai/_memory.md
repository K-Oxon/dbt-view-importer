# bq2dbt プロジェクト実装メモ

## プロジェクト概要
- BigQueryのビューをdbtモデルに自動変換するCLIツール
- 主要機能：ビュー検出、依存関係分析、モデル生成、参照変換、インタラクティブ確認
- 技術スタック：Python 3.9+、BigQuery API、Rich UI、Jinja2テンプレート

## 現状分析
- pyproject.tomlに基本設定が行われている
- まだソースコード構造が整備されていない
- 必要な依存関係の設定が不完全

## 必要な機能コンポーネント
1. BigQuery クライアント
   - データセットからビュー一覧取得
   - ビュー定義の取得
   - Lineage API接続

2. 依存関係リゾルバー
   - ビュー間の依存関係解析
   - 参照グラフ構築
   - 変換順序の決定（トポロジカルソート）

3. モデルジェネレーター
   - ビュー定義からdbtモデル生成
   - 参照をref()関数に変換
   - テンプレート適用

4. CLIインターフェース
   - コマンドライン引数処理
   - インタラクティブプロンプト
   - 進捗表示

5. ユーティリティ
   - ロギング
   - 名前付け規則
   - エラーハンドリング

## 実装ステップ
1. プロジェクト構造の整備
2. 依存関係の設定
3. コア機能実装
4. CLI実装
5. テスト追加
6. ドキュメント作成 